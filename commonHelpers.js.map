{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function imageRender(data) {\n    return data.hits.map((item) => {\n        return `<div class=\"gallery-item\">\n            <a href=\"${item.largeImageURL}\" target=\"_blank\">\n                <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" />\n            </a>\n            <ul class=\"img-data-list\">\n                <li class=\"likes\">Likes<p>${item.likes}</p></li>\n                <li class=\"views\">Views<p>${item.views}</p></li>\n                <li class=\"comments\">Comments<p>${item.comments}</p></li>\n                <li class=\"downloads\">Downloads<p>${item.downloads}</p></li>\n            </ul>\n        </div>`;\n    }).join('');\n}\n","import axios from \"axios\";\n\nexport function getPhotos(q, page) {\n    const API_KEY = '43242256-64b8ba54a0ed56e09a2e1fe41';\n    const BASE_URL = \"https://pixabay.com/api/?key=\" + API_KEY;\n    const params = new URLSearchParams({\n        key: `${API_KEY}`,\n        q: `${q}`,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page: page \n    });\n    const URL = `${BASE_URL}&${params}`;\n    return axios.get(URL).then(res => res.data);\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { imageRender } from \"./js/render-functions\";\nimport { getPhotos } from \"./js/pixabay-api\";\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250\n});\nconst loader = document.getElementById('loader');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\nlet currentPage = 1; \n\nasync function formListener() {\n    form.addEventListener(\"submit\", async (e) => {\n        e.preventDefault();\n        const q = form.elements.input.value; \n        if (q === \"\") return;\n        loader.style.display = 'block'; \n        gallery.innerHTML = ''; \n        currentPage = 1; \n        try {\n            const data = await getPhotos(q, currentPage);\n            if (data.hits.length === 0) {\n                iziToast.error({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: 'topRight'\n                });\n                loadMoreBtn.style.display = 'none';\n            } else {\n                const markup = imageRender(data);\n                gallery.innerHTML = markup;\n                lightbox.refresh();\n                if (data.totalHits > 15) {\n                    loadMoreBtn.style.display = 'block'; \n                } else {\n                    loadMoreBtn.style.display = 'none'; \n                }\n            }\n            loader.style.display = 'none'; \n        } catch (err) {\n            iziToast.error({\n                position: \"topRight\",\n                message:\"Sorry, there are no images matching your search query. Please try again!\"\n            });\n        }\n    });\n};\n\nasync function loadMoreListener() {\n    loadMoreBtn.addEventListener(\"click\", async () => {\n        const q = form.elements.input.value;\n        loader.style.display = 'block'; \n        currentPage++; \n        try {\n            const data = await getPhotos(q, currentPage);\n            if (data.hits.length === 0) {\n                iziToast.info({\n                    message: \"Sorry, there are no more images available.\",\n                    position: 'topRight'\n                });\n                loader.style.display = 'none'; \n                return; \n            }\n            const additionalMarkup = imageRender(data);\n            const tempDiv = document.createElement('div');\n            tempDiv.innerHTML = additionalMarkup;\n            const images = tempDiv.querySelectorAll('img');\n            let loadedImagesCount = 0;\n            images.forEach(img => {\n                img.onload = () => {\n                    loadedImagesCount++;\n                    if (loadedImagesCount === images.length) {\n                        gallery.innerHTML += additionalMarkup;\n                        loader.style.display = 'none'; \n                        lightbox.refresh();\n                    }\n                };\n            });\n        } catch (err) {\n            iziToast.error({\n                position: \"topRight\",\n                message:\"Sorry, there was an error loading more images. Please try again!\"\n            });\n        }\n        \n    });\n};\n\n\n\n\nformListener();\nloadMoreListener();\n"],"names":["imageRender","data","item","getPhotos","q","page","API_KEY","BASE_URL","params","URL","axios","res","form","gallery","lightbox","SimpleLightbox","loader","loadMoreBtn","currentPage","formListener","e","iziToast","markup","loadMoreListener","additionalMarkup","tempDiv","images","loadedImagesCount","img"],"mappings":"owBAAO,SAASA,EAAYC,EAAM,CAC9B,OAAOA,EAAK,KAAK,IAAKC,GACX;AAAA,uBACQA,EAAK,aAAa;AAAA,4BACbA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA,4CAGpBA,EAAK,KAAK;AAAA,4CACVA,EAAK,KAAK;AAAA,kDACJA,EAAK,QAAQ;AAAA,oDACXA,EAAK,SAAS;AAAA;AAAA,eAG7D,EAAE,KAAK,EAAE,CACd,CCZO,SAASC,EAAUC,EAAGC,EAAM,CAC/B,MAAMC,EAAU,qCACVC,EAAW,gCAAkCD,EAC7CE,EAAS,IAAI,gBAAgB,CAC/B,IAAK,GAAGF,CAAO,GACf,EAAG,GAAGF,CAAC,GACP,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACd,CAAK,EACKI,EAAM,GAAGF,CAAQ,IAAIC,CAAM,GACjC,OAAOE,EAAM,IAAID,CAAG,EAAE,KAAKE,GAAOA,EAAI,IAAI,CAC9C,CCTA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EACKC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAc,SAAS,eAAe,aAAa,EACzD,IAAIC,EAAc,EAElB,eAAeC,GAAe,CAC1BP,EAAK,iBAAiB,SAAU,MAAOQ,GAAM,CACzCA,EAAE,eAAc,EAChB,MAAMhB,EAAIQ,EAAK,SAAS,MAAM,MAC9B,GAAIR,IAAM,GACV,CAAAY,EAAO,MAAM,QAAU,QACvBH,EAAQ,UAAY,GACpBK,EAAc,EACd,GAAI,CACA,MAAMjB,EAAO,MAAME,EAAUC,EAAGc,CAAW,EAC3C,GAAIjB,EAAK,KAAK,SAAW,EACrBoB,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC9B,CAAiB,EACDJ,EAAY,MAAM,QAAU,WACzB,CACH,MAAMK,EAAStB,EAAYC,CAAI,EAC/BY,EAAQ,UAAYS,EACpBR,EAAS,QAAO,EACZb,EAAK,UAAY,GACjBgB,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,MAEnC,CACDD,EAAO,MAAM,QAAU,MAC1B,MAAa,CACVK,EAAS,MAAM,CACX,SAAU,WACV,QAAQ,0EACxB,CAAa,CACJ,EACT,CAAK,CACL,CAEA,eAAeE,GAAmB,CAC9BN,EAAY,iBAAiB,QAAS,SAAY,CAC9C,MAAMb,EAAIQ,EAAK,SAAS,MAAM,MAC9BI,EAAO,MAAM,QAAU,QACvBE,IACA,GAAI,CACA,MAAMjB,EAAO,MAAME,EAAUC,EAAGc,CAAW,EAC3C,GAAIjB,EAAK,KAAK,SAAW,EAAG,CACxBoB,EAAS,KAAK,CACV,QAAS,6CACT,SAAU,UAC9B,CAAiB,EACDL,EAAO,MAAM,QAAU,OACvB,MACH,CACD,MAAMQ,EAAmBxB,EAAYC,CAAI,EACnCwB,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAYD,EACpB,MAAME,EAASD,EAAQ,iBAAiB,KAAK,EAC7C,IAAIE,EAAoB,EACxBD,EAAO,QAAQE,GAAO,CAClBA,EAAI,OAAS,IAAM,CACfD,IACIA,IAAsBD,EAAO,SAC7Bb,EAAQ,WAAaW,EACrBR,EAAO,MAAM,QAAU,OACvBF,EAAS,QAAO,EAExC,CACA,CAAa,CACJ,MAAa,CACVO,EAAS,MAAM,CACX,SAAU,WACV,QAAQ,kEACxB,CAAa,CACJ,CAET,CAAK,CACL,CAKAF,IACAI,EAAkB"}